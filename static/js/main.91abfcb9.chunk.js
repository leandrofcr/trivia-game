(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{123:function(e,t,a){e.exports=a(224)},128:function(e,t,a){},135:function(e,t,a){},142:function(e,t){},144:function(e,t){},177:function(e,t){},178:function(e,t){},184:function(e,t){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(36),o=a.n(s),i=(a(128),a(14)),c=a(71),l=a(15),u=a(24),m=a(5),p=a(6),d=a(8),f=a(3),b=a(7),h=a(122),v=a(13),y=a(11),E=a.n(y);function g(){var e,t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=a.sent,a.next=5,E.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t);case 7:case"end":return a.stop()}}))}function O(e,t){var a,n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.a.awrap(fetch("https://opentdb.com/api.php?amount=".concat(e,"&token=").concat(t)));case 2:return a=r.sent,r.next=5,E.a.awrap(a.json());case 5:return n=r.sent,r.abrupt("return",n);case 7:case"end":return r.stop()}}))}var w=function(e){return{type:"GET_QUESTIONS",payload:e}},k=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).state={name:"",gravatarEmail:"",btnEnable:!0,login:!1,errors:{}},e.verifyLogin=e.verifyLogin.bind(Object(v.a)(e)),e.nameInfo=e.nameInfo.bind(Object(v.a)(e)),e.emailInfo=e.emailInfo.bind(Object(v.a)(e)),e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.props.savePlayerInfo,t=this.state;e({name:t.name,gravatarEmail:t.gravatarEmail}),null===localStorage.getItem("ranking")&&localStorage.setItem("ranking",JSON.stringify([]))}},{key:"verifyLogin",value:function(){var e=this.state,t=e.name,a=e.gravatarEmail,n={};return t.length>0&&a.length>0&&this.setState({btnEnable:!1}),/(\w+[0-9]*)+@\w+\.\w+/.test(a)&&0!==t.length||(n.errorEmail="Nome ou email incorreto",this.setState({btnEnable:!0,errors:n})),this.setState({errors:n})}},{key:"redirectToGame",value:function(){this.setState({login:!0})}},{key:"nameInfo",value:function(){var e=this,t=this.state.name;return r.a.createElement("label",{htmlFor:"name"},"Nome:",r.a.createElement("input",{"data-testid":"input-player-name",id:"name",name:"name",type:"text",value:t,onChange:function(t){var a=t.target;e.setState({name:a.value},e.verifyLogin)}}))}},{key:"emailInfo",value:function(){var e=this,t=this.state,a=t.gravatarEmail,n=t.errors;return r.a.createElement("label",{htmlFor:"email"},"Email:",r.a.createElement("input",{"data-testid":"input-gravatar-email",id:"email",name:"email",type:"text",value:a,onChange:function(t){var a=t.target;e.setState({gravatarEmail:a.value},e.verifyLogin)}}),n.errorEmail&&r.a.createElement("span",null,n.errorEmail))}},{key:"render",value:function(){var e=this,t=this.state,a=t.btnEnable,n=t.login,s=this.props,o=s.getTokenData,i=s.isQuestions;return n&&i?r.a.createElement(l.a,{to:"/trivia"}):r.a.createElement("form",null,this.nameInfo(),this.emailInfo(),r.a.createElement("button",{type:"button",disabled:a,"data-testid":"btn-play",onClick:function(){o(),e.redirectToGame()}},"Jogar"))}}]),t}(n.Component),j=Object(i.b)((function(e){return{isQuestions:e.player.isQuestions}}),(function(e){return{getTokenData:function(){return e((function(e){var t,a,n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.a.awrap(g());case 2:return t=r.sent,localStorage.setItem("token",t.token),e({type:"GET_TOKEN",payload:t}),r.next=7,E.a.awrap(O(5,t.token));case 7:a=r.sent,e(w(a)),n={player:{score:0,assertions:0}},localStorage.setItem("state",JSON.stringify(n));case 11:case"end":return r.stop()}}))}))},savePlayerInfo:function(t){return e({type:"GET_PLAYER_INFO",payload:t})}}}))(k),S=(a(135),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).state={redirectSettings:!1,showComp:!1},e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.showComp()}},{key:"componentWillUnmount",value:function(){this.showComp()}},{key:"showComp",value:function(){var e=this.state.showComp;this.setState({showComp:!e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.redirectSettings,n=t.showComp;return a?r.a.createElement(l.a,{to:"/settings"}):r.a.createElement("section",{className:"login"},r.a.createElement(u.Transition,{items:n,from:{x:500,opacity:0},enter:{x:0,opacity:1},leave:{x:-500,opacity:0},delay:200,config:u.config.molasses},(function(t,a){return a&&r.a.createElement(u.animated.div,{style:t},r.a.createElement("section",{className:"login-container"},r.a.createElement(j,null),r.a.createElement("button",{type:"button","data-testid":"btn-settings",className:"settings-btn",onClick:function(){return e.setState({redirectSettings:!0})}},r.a.createElement(h.a,null))))})))}}]),t}(n.Component)),T=a(119),A=a.n(T),C=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.gravatarEmail,n=e.score,s=e.avatar,o=A()(a).toString();return s("https://www.gravatar.com/avatar/".concat(o)),r.a.createElement("header",null,r.a.createElement("section",{className:"player-info"},r.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(o),alt:"Avatar do jogador","data-testid":"header-profile-picture"}),r.a.createElement("p",{"data-testid":"header-player-name"},"Player:"," ",t)),r.a.createElement("section",{className:"score-container"},r.a.createElement("p",null,"Score:"),r.a.createElement("p",{"data-testid":"header-score"},n)))}}]),t}(n.Component),I=Object(i.b)((function(e){return{name:e.player.name,gravatarEmail:e.player.gravatarEmail,score:e.player.score}}),(function(e){return{avatar:function(t){return e({type:"SAVE_AVATAR",payload:t})}}}))(C),N=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).state={seconds:30},e.starTimer=e.starTimer.bind(Object(v.a)(e)),e.stopTimer=e.stopTimer.bind(Object(v.a)(e)),e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.starTimer()}},{key:"starTimer",value:function(){var e=this;this.timerInterval=setInterval((function(){e.setState((function(e){return{seconds:e.seconds-1}}))}),1e3)}},{key:"stopTimer",value:function(){clearInterval(this.timerInterval),this.setState({seconds:"0"})}},{key:"render",value:function(){var e=this.props,t=e.disableButtons,a=e.updateSeconds,n=e.wasAnswered,s=this.state.seconds;return(0===s||n)&&(this.stopTimer(),t()),a(s),r.a.createElement("p",{className:"timer"},s)}}]),t}(n.Component),x=Object(i.b)(null,(function(e){return{updateSeconds:function(t){return e({type:"UPDATE_TIME",payload:t})}}}))(N),_=(a(221),{hard:3,medium:2,easy:1}),q=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).state={wasAnswered:!1,isDisable:!1,questionIndex:0},e.showColoredBorders=e.showColoredBorders.bind(Object(v.a)(e)),e.disableButtons=e.disableButtons.bind(Object(v.a)(e)),e.sumScore=e.sumScore.bind(Object(v.a)(e)),e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.assertions,a={player:{score:e.score,assertions:t}};localStorage.setItem("state",JSON.stringify(a))}},{key:"showColoredBorders",value:function(){this.setState({wasAnswered:!0})}},{key:"disableButtons",value:function(){this.setState({isDisable:!0})}},{key:"sumScore",value:function(e,t){(0,this.props.uptadePlayerScore)(JSON.parse(localStorage.getItem("state")).player.score+10+e*_[t])}},{key:"renderBtnCorrectAnswer",value:function(){var e=this,t=this.props,a=t.questions,n=t.timeLeft,s=t.updatePlayerAssertions,o=this.state,i=o.isDisable,c=o.wasAnswered,l=o.questionIndex,u=c?"correct-answer":"btn-alternative";return r.a.createElement("button",{type:"button",className:u,"data-testid":"correct-answer",disabled:i,onClick:function(){e.showColoredBorders(),e.sumScore(n,a[l].difficulty),s(1)}},a[l].correct_answer)}},{key:"renderBtnWrongAnswer",value:function(){var e=this,t=this.props.questions,a=this.state,n=a.isDisable,s=a.wasAnswered,o=a.questionIndex,i=s?"wrong-answer":" btn-alternative";return t[o].incorrect_answers.map((function(t,a){return r.a.createElement("button",{type:"button",className:i,key:a,disabled:n,"data-testid":"wrong-answer-".concat(a),onClick:function(){return e.showColoredBorders()}},t)}))}},{key:"render",value:function(){var e=this,t=this.props.questions,a=this.state,n=a.wasAnswered,s=a.questionIndex;return s>4?r.a.createElement(l.a,{to:"/feedback"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null),r.a.createElement("section",{className:"main"},r.a.createElement("section",{className:"question-container"},r.a.createElement("p",{"data-testid":"question-category"},t[s].category),r.a.createElement("p",{"data-testid":"question-text"},t[s].question)),r.a.createElement("section",{className:"alternatives"},this.renderBtnCorrectAnswer(),this.renderBtnWrongAnswer()),!n&&r.a.createElement(x,{disableButtons:this.disableButtons,wasAnswered:n}),n&&r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"btn-next",onClick:function(){return e.setState((function(e){return{questionIndex:e.questionIndex+1,wasAnswered:!1}}))}},"Pr\xf3xima")))}}]),t}(n.Component),D=Object(i.b)((function(e){return{questions:e.player.questions,renderQuestions:e.player.renderQuestions,timeLeft:e.player.timeLeft,assertions:e.player.assertions,score:e.player.score,name:e.player.name,urlAvatar:e.player.urlAvatar,gravatarEmail:e.player.gravatarEmail}}),(function(e){return{uptadePlayerScore:function(t){return e({type:"UPDATE_SCORE",payload:t})},updatePlayerAssertions:function(t){return e(function(e){return{type:"UPDATE_ASSERTIONS",payload:e}}(t))}}}))(q),B=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es"))}}]),t}(n.Component),P=(a(222),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.score,a=e.name,n=e.urlAvatar,r=e.gravatarEmail,s=JSON.parse(localStorage.getItem("ranking"));s.push({name:a,score:t,picture:n,gravatarEmail:r}),localStorage.setItem("ranking",JSON.stringify(s))}},{key:"render",value:function(){var e=this.props,t=e.score,a=e.assertions,n=e.history,s=e.reset;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null),r.a.createElement("section",{className:"feedback-container"},r.a.createElement("section",{className:"feedback-message"},a>=3?r.a.createElement("span",{"data-testid":"feedback-text"},"Mandou bem!"):r.a.createElement("span",{"data-testid":"feedback-text"},"Podia ser melhor..."),r.a.createElement("span",{"data-testid":"feedback-total-question"},a),r.a.createElement("span",{"data-testid":"feedback-total-score"},t)),r.a.createElement("section",{className:"fb-btn-container"},r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:function(){return n.replace("/ranking")}},"Ver Ranking"),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:function(){n.replace("/"),s()}},"Jogar novamente"))))}}]),t}(n.Component)),R=Object(i.b)((function(e){return{score:e.player.score,assertions:e.player.assertions,name:e.player.name,urlAvatar:e.player.urlAvatar,gravatarEmail:e.player.gravatarEmail}}),(function(e){return{reset:function(){return e({type:"RESET_STATE"})}}}))(P),L=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).state={showComp:!1},e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.showComp()}},{key:"componentWillUnmount",value:function(){this.showComp()}},{key:"showComp",value:function(){var e=this.state.showComp;this.setState({showComp:!e})}},{key:"render",value:function(){var e=this.state.showComp,t=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score})),a=this.props,n=a.history,s=a.reset;return r.a.createElement("section",null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement(u.Transition,{items:e,from:{y:800,opacity:0},enter:{y:0,opacity:1},leave:{y:-800,opacity:0},delay:200,config:u.config.molasses},(function(e,a){return a&&r.a.createElement(u.animated.div,{style:e},t.map((function(e,t){return r.a.createElement("section",{key:t},r.a.createElement("img",{src:e.picture,alt:"avatar"}),r.a.createElement("span",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("span",{"data-testid":"player-score-".concat(t)},e.score))})))})),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:function(){n.replace("/"),s()}},"Ir para Home"))}}]),t}(n.Component),U=Object(i.b)(null,(function(e){return{reset:function(){return e({type:"RESET_STATE"})}}}))(L);a(223);var J=a(31),Q=a(120),G=a(121),M=a(32),W={name:"",gravatarEmail:"",token:"",score:0,questions:[],assertions:0,isQuestions:!1,timeLeft:0,urlAvatar:""};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_TOKEN":return Object(M.a)({},e,{token:n.token});case"GET_PLAYER_INFO":return Object(M.a)({},e,{name:n.name,gravatarEmail:n.gravatarEmail});case"GET_QUESTIONS":return Object(M.a)({},e,{questions:n.results,isQuestions:!0});case"UPDATE_TIME":return Object(M.a)({},e,{timeLeft:n});case"UPDATE_SCORE":return Object(M.a)({},e,{score:n});case"UPDATE_ASSERTIONS":return Object(M.a)({},e,{assertions:e.assertions+n});case"SAVE_AVATAR":return Object(M.a)({},e,{urlAvatar:n});default:return W}},V=Object(J.combineReducers)({player:F}),K=Object(J.createStore)(V,Object(Q.composeWithDevTools)(Object(J.applyMiddleware)(G.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null,r.a.createElement(i.a,{store:K},r.a.createElement((function(){var e=Object(l.g)(),t=Object(u.useTransition)(e,{from:{x:800,opacity:0},enter:{x:0,opacity:1},leave:{x:-800,opacity:0}});return r.a.createElement(r.a.Fragment,null,t((function(e,t){return r.a.createElement(u.animated.div,{style:e},r.a.createElement(l.d,{location:t},r.a.createElement(l.b,{exact:!0,path:"/",component:S}),r.a.createElement(l.b,{path:"/trivia",component:D}),r.a.createElement(l.b,{path:"/settings",component:B}),r.a.createElement(l.b,{path:"/feedback",component:R}),r.a.createElement(l.b,{path:"/ranking",component:U})))})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[123,1,2]]]);
//# sourceMappingURL=main.91abfcb9.chunk.js.map